<!DOCTYPE html> 
<html>
<head>
    <title>Povedeno</title>
    <style>
        body {
            margin: 0;
            text-align: center;
            font-family: Arial, sans-serif;
            background: #f5f5f5;
        }
        #game-container {
            margin: 0 auto;
            display: block;
            min-width: 320px;
            min-height: 200px;
            border-radius: 10px;
            overflow: hidden;
            /* will have width and height set dynamically */
        }
        #game-container iframe {
            border: none;
            border-radius: 10px;
            display: block;
        }
        #fullscreen-btn, #open-game-btn {
            margin-top: 10px;
            background: #333;
            color: white;
            padding: 14px 28px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1.2em;
            display: none;
        }
        #fullscreen-btn:active, #open-game-btn:active {
            background: #222;
        }
    </style>
</head>
<body>
    <h1>TestÃ­k rozliÅ¡enÃ­</h1>
    
    <div id="game-container">
      <!-- iframe will be inserted here dynamically on non-iPad devices -->
    </div>

    <!-- Fullscreen Button (for non-iPad mobiles) -->
    <button id="fullscreen-btn">ðŸ”³ Fullscreen</button>
    
    <!-- Open Game Button (for iPad) -->
    <button id="open-game-btn">Open Game in New Tab</button>
    
    <div id="text-section">
        <h2>About the Game:</h2>
        <p>This is a fun and interactive game that you can play online. Enjoy and have fun!</p>
    </div>

    <script>
      const userAgent = navigator.userAgent;
      const isMobile = /iPhone|iPad|iPod|Android/i.test(userAgent);
      // Improved iPad detection for iPadOS 13+
      const isiPad = /iPad/.test(userAgent) || 
                     (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);

      const gameURL = "https://maslodavid49-ui.github.io/Test-0.5002/";
      const gameContainer = document.getElementById("game-container");
      const fullscreenBtn = document.getElementById("fullscreen-btn");
      const openGameBtn = document.getElementById("open-game-btn");

      let gameFrame = null;

      function resizeGame() {
        if (!gameFrame) return; // no iframe loaded

        if (isMobile && !isiPad) {
          // Non-iPad mobile devices: responsive sizing
          const isPortrait = window.innerHeight > window.innerWidth;
          const screenWidth = window.innerWidth;
          const screenHeight = window.innerHeight;
          const aspectRatio = 16 / 10;

          let width, height;

          if (isPortrait) {
            width = Math.floor(screenWidth * 0.95);
            height = Math.floor(width / aspectRatio);
          } else {
            height = Math.floor(screenHeight * 0.85);
            width = Math.floor(height * aspectRatio);
          }

          gameContainer.style.width = width + "px";
          gameContainer.style.height = height + "px";

          gameFrame.style.width = width + "px";
          gameFrame.style.height = height + "px";

          fullscreenBtn.style.display = "inline-block";
          openGameBtn.style.display = "none";

        } else if (!isMobile) {
          // Desktop fixed size
          const width = 1056;
          const height = 660;

          gameContainer.style.width = width + "px";
          gameContainer.style.height = height + "px";

          gameFrame.style.width = width + "px";
          gameFrame.style.height = height + "px";

          fullscreenBtn.style.display = "none";
          openGameBtn.style.display = "none";

        } else {
          // iPad or others where iframe is not loaded, just hide buttons
          fullscreenBtn.style.display = "none";
          openGameBtn.style.display = "inline-block"; // Show open button on iPad
          gameContainer.style.width = "0px";
          gameContainer.style.height = "0px";
        }
      }

      // Initialize the page based on device
      function init() {
        if (isiPad) {
          // iPad: do NOT load iframe, show open in new tab button
          openGameBtn.style.display = "inline-block";
          fullscreenBtn.style.display = "none";

          openGameBtn.addEventListener("click", () => {
            window.open(gameURL, "_blank");
          });

          gameContainer.style.width = "0px";
          gameContainer.style.height = "0px";

        } else {
          // Other devices: create iframe and append it
          gameFrame = document.createElement("iframe");
          gameFrame.id = "game-frame";
          gameFrame.src = gameURL;
          gameFrame.allowFullscreen = true;
          gameFrame.webkitallowfullscreen = true;
          gameFrame.mozallowfullscreen = true;
          gameFrame.setAttribute("allow", "fullscreen");
          gameFrame.style.border = "none";
          gameFrame.style.borderRadius = "10px";
          gameFrame.style.display = "block";

          gameContainer.appendChild(gameFrame);

          fullscreenBtn.style.display = isMobile ? "inline-block" : "none";
          openGameBtn.style.display = "none";

          fullscreenBtn.addEventListener("click", () => {
            if (gameFrame.requestFullscreen) {
              gameFrame.requestFullscreen();
            } else if (gameFrame.webkitRequestFullscreen) {
              gameFrame.webkitRequestFullscreen();
            } else if (gameFrame.msRequestFullscreen) {
              gameFrame.msRequestFullscreen();
            } else {
              alert("Fullscreen is not supported in this browser ðŸ˜ž");
            }
          });
        }

        resizeGame();
      }

      window.addEventListener("resize", resizeGame);
      window.addEventListener("orientationchange", resizeGame);

      init();
    </script>
</body>
</html>
